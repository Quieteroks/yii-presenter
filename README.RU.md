# Yii2 presenter

Презентер является частью "представления" слоя "модели". Он извлекает
данные из модели и форматирует их для отображения в представлении.

Данный вариант презентора является простым способом декорации модели
для представления в MVC фреймворке. В лучшем варианте презентор должен
конвертировать данные из модели в представление и полностью заменить
предстваление собой (т.е. забрать на себя ренеринг ответа).

Но, вы можете положить всю логику представления, связанную с моделью,
в презентер, а так же передавать все данные для представления из презентера.
Все необходимы методы должны быть инкапсулированы в общий интерфейс и позже
сменить презентер (возможно даже с моделью), чтобы полностью переиспользовать
представление для различных моделей.

Типичным примером таких презенторов могут послужить три представления
для CRUD операций в административной панели:
- представление для списка моделей через GridView
- представление для детализации модели черз DetailView
- представление формы для создания и обновления моделей

## Установка

Установка с помощью composer:

```
composer install quieteroks/yii-presenter
```

Или добавьте в `composer.json` в секцию `require`:

```
"quieteroks/yii-presenter": "^1.0"
```

## Использование

Презентер может декорировать `массив`, `объект` или `yii\base\Model`
и предоставляя доступ ко всем декорированным типам как к презентируемому объекту.

- Минимальная версия презентора:
```php
/**
 * DocBlock для описания всех полей
 */
class UserPresenter extends \quieteroks\presenter\Presenter
{
}
```

- Презентор может спрятать иди переименовать базовые свойства:
```php
class UserPresenter extends \quieteroks\presenter\Presenter
{
    /**
     * @var array Защита хэша пароля в презентуемом объекте
     */
    protected $hidden = [
        'password_hash',
    ];
    /**
     * @var array Декорация свойств за camelCase синтаксисом
     */
    protected $renamed = [
        'createdAt' => 'created_at',
        'updatedAt' => 'updated_at',
    ];
}
```

- Презентер может декорировать и добавлять новые свойства через геттеры:
```php
class UserPresenter extends \quieteroks\presenter\Presenter
{
    /**
     * Возвращает полное имя
     *
     * @return string
     */
    protected function getFullName()
    {
        return implode(' ', array_filter([
            $this->getRealPropertyValue('last_name'),
            $this->getRealPropertyValue('first_name'),
            $this->getRealPropertyValue('middle_name'),
        ]));
    }
}
```

## Приоритет доступа

Презентер находит и предоставляет доступ к свойствам в приоритете:

- Публичные свойства презентера
- Геттер методы в презентере
- Геттер методы в декорируемом объекте
- Публичные свойства в декорируемом объекте

Все геттер методы оборачиваются в cameCase: `created_at => getCreatedAt`
это так же касается и геттер методов в декорируемом объекте.
Нет доступа к меодам типа `getCreated_at`